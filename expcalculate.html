<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>경험치 계산기</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: #f2f2f2;
      padding: 2rem;
    }
    .container {
      max-width: 500px;
      margin: auto;
      background: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    label, input {
      display: block;
      margin-bottom: 1rem;
      width: 40%;
    }
    input {
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      background: #4CAF50;
      color: white;
      padding: 0.7rem;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      width: 40%;
    }
    button:hover {
      background: #45a049;
    }
    .result {
      margin-top: 2rem;
      padding: 1rem;
      background: #e7f3e7;
      border-left: 5px solid #4CAF50;
    }

    body {
        font-family: 'Arial', sans-serif;
        background: #f0f2f5;
        padding: 2rem;
    }

    .container {
        max-width: 700px;
        margin: auto;
        background: white;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        overflow: hidden;
    }

    .tab-header {
        display: flex;
        background-color: #e0e0e0;
        border-bottom: 1px solid #ccc;
    }

    .tab-button {
        flex: 1;
        padding: 1rem;
        background: #e0e0e0;
        border: none;
        border-right: 1px solid #ccc;
        font-weight: bold;
        cursor: pointer;
        text-align: center;
        transition: background 0.3s, border-bottom 0.3s;
    }

    .tab-button:last-child {
        border-right: none;
    }

    .tab-button.active {
        background: white;
        border-bottom: 3px solid #4CAF50;
        color: #333;
    }

    .tab-content {
        display: none;
        padding: 2rem;
    }

    .tab-content.active {
        display: block;
    }

    .tooltip {
        position: relative;
        cursor: help;
        display: inline-block;
    }

    .tooltip .tooltip-text {
    visibility: hidden;
    width: 220px;
    background-color: #333;
    color: #fff;
    text-align: center;
    padding: 6px;
    border-radius: 6px;
    position: absolute;
    z-index: 1;
    bottom: 125%; /* 위치 */
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    transition: opacity 0.3s;
    }

    .tooltip:hover .tooltip-text {
    visibility: visible;
    opacity: 1;
    }


    #targetDiv {
      display: none;
    }

    .form-wrapper {
      display: flex;
      flex-wrap: nowrap;
      gap: 10px; /* 두 박스 사이 간격 */
      justify-content: center;
    }
    
    .left-panel,
    .right-panel {
      width: 700px;
      height: 215px;
      box-sizing: border-box;
      background-color: #f9f9f9;
      padding: 1rem;
      border: 1px solid #ccc;
      border-radius: 8px;
      
</style>
  </style>
</head>
<body>
    <div class="container">
        <div class="tab-header">
          <button class="tab-button active" onclick="showTab('simple')">초상</button>
          <button class="tab-button" onclick="showTab('detailed')">아트마람</button>
        </div>
      
        <div class="form-wrapper">
            <div class="left-panel">
              <label for="startLevel">시작 레벨</label>
              <input type="number" id="startLevel" min="1" />
        
              <label for="percentage">시작 레벨의 경험치 퍼센트 (%)</label>
              <input type="number" id="percentage" min="0" max="100" value="0" />
        
              <label for="endLevel">목표 레벨</label>
              <input type="number" id="endLevel" min="1" />


        <label for="expPerGame">
            1판당 경험치 (백만 단위)
            <span class="tooltip">❓
              <span class="tooltip-text">5억이라면 500입니다</span>
            </span>
          </label>          
        <input type="number" id="expPerGame" min="1" />


          <button onclick="calculate()">계산하기</button>
  
          <div id="targetDiv" style="display: none;"></div>

        


        <div class="right-panel">
          <label for="selectoption">세부 옵션</label>
          <select id="selectoption" name="Selectoption" onchange="handleOnChange(this)">
            <option value="unuse">사용안함</option>
            <option value="use">사용</option>
          </select>
            <div id="selectoption"></div>
                
          
          <div id="targetDiv">
              <label for="solooption">1인 여부</label>
              <select id="solooptionn" name="solotopion" onchange="handleOnChange(this)">
                <option value="solo">1인</option>
                <option value="notsolo">1인초과</option>
              </select>
                <div id="solooption"></div>
          
              <label for="missionoption">랜덤 미션 설정</label>
              <select id="missionoptionn" name="missionoption" onchange="handleOnChange(this)">
                <option value="missionoff">사용안함</option>
                <option value="missionon">사용</option>
              </select>
                <div id="missionoption"></div>
  
                <label for="cleartime">평균 클리어 시간 (초)</label>
                <input type="number" id="cleartime" min="1800" />
          </div>



  </div>

    
    <div class="tab-content" id="detailed">

    <div class="tabs">
        <button class="tab-button active" onclick="showTab('simple')">초상</button>
        <button class="tab-button" onclick="showTab('detailed')">아트마람</button>
    </div>

    <div class="tab-content active" id="simple">...</div>     
    <div class="tab-content" id="detailed">...</div>




  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const selectElement = document.getElementById('selectoption');
      const targetDiv = document.getElementById('targetDiv');


      if (selectElement.value === 'use') {
        targetDiv.style.display = 'block';
      } else {
        targetDiv.style.display = 'none';
      }
  
      selectElement.addEventListener('change', function () {
        if (this.value === 'use') {
          targetDiv.style.display = 'block';
        } else {
          targetDiv.style.display = 'none';
        }
      });
    });
    
    // 경험치 테이블
    const a = [0,161600,331199,511999,707199,919998,1153598,1411198,1695997,2011197,2359997,2749452,3183635,3666655,4202806,4796410,5451992,
                6174203,6967703,7837386,8788282,9825405,10954041,12179618,13507520,14943444,16493240,18162676,19957883,21885150,23950648,26182783, 
                28591469,31187016,33980137,36981958,40204421,43659548,47359805,51318566,55549257,60065779,64883037,70016497,75481637,81295040,87473890,
                94035982,100999740,108384223,116286125,124735435,133764183,143406586,153697530,164674211,176375395,188841455,202115358,216241841,231268471,
                247244759,264222206,282255460,301401344,321718898,343270652,366122810,390344149,416255259,443963465,473582129,505230902,539037463,575136416,
                613669560,654787770,698651442,745427572,795295079,848441897,905067111,965381441,1029607750,1097981562,1170751580,1248180223,1330544178,1418979511,
                1513909513,1615785993,1725092841,1842345214,1968093269,2102921294,2247454086,2402358793,2568344197,2746167704,2936637513,3222201878,3514849904,
                3814701840,4121879219,4436504877,4758702974,5088598982,5426319701,5771993283,6125749217,6487713715,6858018833,7236797991,7624185991,8020319037,
                8425334722,8839372047,9262571443,9695074756,10137025269,10588567721,11049848292,11521014626,12002215850,12493608429,12995344635,13507578254,
                14030464569,14564160383,15108824037,15664615397,16231695875,16810228449,17400384390,18002330001,18616233181,19242263408,19880591765,20531398205,
                21194857247,21871145042,22560439391,23262927404,23978790391,24708211344,25451382915,26208491665,26979725867,27765275489,28565340650,29380114995,
                30209802555,31054600670,31914708451,32790335766,33681685484,34588971510,35512400527,36452181024,37408532912,38381668557,39371811993,40379179521,
                41403999360,42446491760,43506889185,44585426341,45682329632,46797838080,47932182164,49085605239,50258352998,51450662239,52662783060,53894956460,
                55147437002,56420481632,57714349706,59029290975,60365569345,61723451169,63103192830,64505065302,65929342045,67376298991,68846214568,70339356643,
                71856008403,73396455572,74960986439,76549891843,78163465198,79802002526,81465802436,83155166155,84870397557,86611788619,88379648206,90174287868,
                91996021821,94104077710,96238433682,98399316870,100586955707,102801561982,105043366396,107312600965,109609499046,111934276622,114287169325,116668414141,
                119078249373,121516895268,123984592476,126481582976,129008110105,131564418578,134150734139,136767303847,139414376156,142092200878,144801029208,147541092492,
                150312644325,153115939701,155951235036,158818788130,161718835975,164651638833,167617458363,170616557649,173649201226,176715655043,179816163085,182950993807,
                186120417090,189324704268,192564128155,195838963005,199149459925,202495895721,205878548657,209297698474,212753626423,216246615224,219776923232,223344835766,
                226950639626,230594623123,234277076103,237998289911,241758557413,245558145678,249397350206,253276468034,257195797764,261155639522,265156294988,269198067422,
                273281261625,277406154857,281573054637,285782270035,290034111703,294328891900,298666924455,303048524792,307474009960,311943698592,316457879785,321016874961,
                325621007138,330270600958,334965982717,339707480319,344495423311,349330142907,354211971946,359141244924,364118298020,369143469056,374217063551,379339422213,
                384510887405,389731803172,395002515272,400323371133,405694719881,411116912371,416590301140,422115240441,427692086269,433321196321,439002930021,444737648553,
                450525714815,456367493451,462263350878,468213655244,474218776457,481794163655,489439003339,497153715515,504938770815,512794642070,520721804345,528720734978,
                536791913524,544935821792,553152943884,561443766137,569808777162,578248467882,586763331473,595353863405,604020561480,612763925772,621584458667,630482664903,
                639459051510,648514182855,657648571356,666862731744,676157181104,685532438914,694989026985,704527469502,714148293061,723852026611,733639201492,743510351478,
                753466012712,763506723750,773633025598,783845461653,794144577742,804530922163,815005045623,825567501279,836218844777,846959696261,857790617002,868712170786,
                879724923849,890829444917,902026305249,913316078573,924699341127,936176671702,947748651576,959415864557,971178963159,983038537019,994995178328,1007049481871,
                1019202044960,1031453467480,1043804351930,1056255303355,1068806998564,1081460048595,1094215067057,1107072670171,1120033476815,1133098108455,1146267189189,1159541345790,
                1172921279917,1186407624389,1200001014723,1213702089065,1227511488235,1241429855770,1255457912510,1269596308132,1283845695055,1298206728367,1312680065874,1327266368139,
                1341966375481,1356780754701,1371710175380,1386755309814,1401916833053,1417195502055,1432591998227,1448107005754,1463741211646,1479495305666,1495370061547,1511366175527,
                1527484346621,1543725276662,1560089753196,1576578484559,1593192181931,1609931559381,1626797418329,1643790479372,1660911466021,1678161104623,1695540210653,1713049517133,
                1730689759947,1748461677885,1766366100657,1784403773755,1802575445599,1820881867587,1839323883724,1857902252134,1876617733940,1895471184211,1914463370847,1933595064771,
                1952867039852,1972280165743,1991835223239,2011532996102,2031374365242,2051360121398,2071491058299,2091768068194,2112191951842,2132763513012,2153483655375,2174353189782,
                2195372930117,2216543791556,2237866595115,2259342164868,2280971427578,2302755214501,2324694359972,2346789802426,2369042383433,2391452947663,2414022445305,2436751728316,
                2459641755080,2482693384788,2505907479859,2529285010574,2552826846637,2576533966666,2600407247732,2624447570126,2648655924505,2673033198578,2697580391349,2722422016277,
                2747561377035,2773001692085,2798746312835,2824798725560,2851162331576,2877840556863,2904836852059,2932154805000,2959798029910,2987770053998,3016074543401,3044715190913,
                3073695715971,3103019864795,3132691410531,3162714269603,3193092270118,3223829384745,3254929496974,3286396635990,3318234859956,3350448256006,3383040940391,3416017058631,
                3449380906394,3483136688879,3517288762756,3551841515771,3586799243974,3622166396716,3657947454728,3694147054752,3730769741789,3767820092529,3805302841534,3843222630393,
                3881584259753,3920392563987,3959652411358,3999368704010,4039546507289,4080190792659,4121306695997,4162899258409,4204973686817,4247535224267,4290589150110,4334140780179,
                4378195600163,4422759000083,4467836541248,4513433823391,4559556484858,4606210202797,4653400693145,4701133710815,4749415187575,4798250957743,4847647033754,4897609469215,
                4948144358891,4999257838902,5050956227883,5103245746150,5156132797817,5209623830598,5263725335791,5318443848488,5373785947785,5429758401583,5486368023650,5543621527903,
                5601525819146,5660087848467,5719314761071,5779213602162,5839791612390,5901056081028,5963014345958,6025673793898,6089041860633,6153126182561,6217934294932,6283473935214,
                6349752892079,6416779159490,6484560630393,6553105404397,6622421479170,6692517060684,6763400408771,6835079994677,6907564187866,6980861570607,7054980781510,7129930515782,
                7205719525210,7282356779217,7359851144700,7438211707606,7517447612989,7597568228427,7678582818883,7760500873279,7843331942213,7927085637941,8011771634655,8097399835471,
                8183980207488,8271522782075,8360037655161,8449534987213,8540025173227,8631518675125,8724026021733,8817557809080,8912124872816,9007738117890,9104408518854,9202147120175,
                9300965036209,9400873626674,9501884323633,9604008631476,9707258304232,9811644993127,9917180600555,10023877104023,10131746735943,10240801625918,10351054160002,10462516983521,
                10575202639639,10689123932355,10804293746145,10920725045937,11038430877462,11157424552679,11277719466555,11399329097423,11522267194310,11646547591835,11772184210575,11899191057439,
                12027582415135,12157372654950,12288576237129,12421207902260,12555282290104,12690814515502,12827819593469,12966312824972,13106309605278,13247825423922,13390876061020,13535477197141,
                13681645002303,13829395548003,13978745202046,14129710431955,14282308005198,14436554591301,14592467362548,14750063394331,14909360067816,15070374869456,15233125391422,15397629536453,
                15563905315396,15731970847651,15901844568015,16073545022245,16247091075233,16422501705748,16599796006404,16778993184125,16960112771010,17143174415910,17328198096639,17515203910744,
                17704212075465,17895243141980,18088317784168,18283456798576,18480681320697,18680012611728,18881472275673,19085082044752,19290863779923,19498839690028,19709032115176,19921463747835,
                20136157414286,20353136075162,20572423048608,20794041789687,21018016114924,21244369980936,21473127484389,21704313088634,21937951400279,22174067396612,22412686200792,22653833311296,
                22897534375103,23143815188281,23392701927544,23644220921344,23898398882840,24155262680243,24414839570550,24677156968493,24942242682354,25210124680845,25480831330349,25754391161073,
                26030832866997,26310185784013,26592479177892,26877742721733,27166006499479,27457300767835,27751655956221,28049102910485,28349672896464,28653397358323,28960307919235,29270436873961,
                29583816454591,29900479323124,30220458575084,30543787493529,30870499799338,31200629404554,31534210663361,31871278375743,32211867538656,32556013345974,32903751443208,33255117931204,
                33610149113591,33968881753725,34331353078428,34697600523220,35067661733108,35441575081676,35819378897289,36201112242833,36586814399721,36976525129962,37370284417092,37768132730636,
                38170110764661,38576259703741,38986621226817,39401237510140,39820150963752,40243404500507,40671041270124,41103104929722,41539639647745,41980689835745,42426300421223,42876516851579,
                43331385097097,43790951380679,44255262453779,44724365323626,45198307807225,45677137983851,46160904194975,46649655602902,47143441638689,47642312282453,48146317786286,48655509239115,
                49169938007407,49689656019660,50214715770530,50745170038822,51281072174340,51822476102047,52369436325113,52922007929089,53480246297158,54044207399791,54613948089490,55189525234226,
                55770996590520,56358420517952,56951855689755,57551361387207,58156997503917,58768824550139,59386903655862,60011296277482,60642064795874,61279271924178,61922981309075,62573256936672,
                63230163434068,63893766073759,64564130778066,65241324122260,65925413034138,66616465406621,67314549797632,68019735127287,68732091295381,69451688569938,70178598207953,70911060887263,
                71649116283730,72392804564829,73142166393762,73897242304545,74658073328837,75424700684640,76197166091982,76975511142893,77759777934818,78550009073317,79346247037124,80148534816509,
                80956915915985,81771433714428,82592132108414,83419055191224,84252247578282,85091754086042,85937619731368,86789890059490,87648610492540,88513827311697,89385586676188,90263935281650,
                91148920031626,92040588038514,92938986957434,93844164655202,94756169545883,95675050259714,96600855642446,97533634756326,98473437219063,99420312867730,100374312099433,101335485535194,
                102303884019275,103279558620184,104262560974792,105252943291062,106250757662888,107256056759031,108268893825858,109289321997045,110317394987685,111353167097023,112396692862988,113448027063267,
                114507224714586,115574341426345,116649433051735,117732556041314,118823767092390,119923123506173,121030682476687,122146502161749,123270640615087,124403156501165,125544109099806,126693557588246,
                127851561761208,129018182035545,130193479090984,131377513869351,132570347941420,133772043145035,134982661951789,136202267103383,137430921612817,138668689133717,139915633594059,141171819569281,
                142437311912239,143712175754412,144996476881708,146290281361738,147593655921412,148906667574495,150229383998939,151561873162653,152904203324765,154256443415639,155618662659972,156990930960743,
                158373318518392,159765896216578,161168735241717,162581907082108,164005483916432,165439538618702,166884144371998,168339374669786,169805303708102,171282005996545,172769556752286,174268031511501,
                175777506522961,177298058357637,178829764306420,180372701985614,181926949736493,183492586231288,185069690472243,186658342193969,188258621868557,189870610305527,191494389056979,193130040018089,
                194777645426141,196437288268488,198109052287737,199793021576113,201489280576920,203197914906537,204919010127330,206652652569649,208398929337085,210157927895205,211929736488006,213714443727324,
                215512139008634,217322912098580,219146853555245,220984054311226,222834606095794,224698601440261,226576133258208,228467294847063,230372180314112,232290884579222,234223502953941,236170131570392,
                238130866955778,240105806463181,242095047846910,244098690123569,246116832285227,248149574163281,250197016431167,252259260174951,254336407330926,256428560688328,258535823457063,260658299708237,
                262796093937097,264949311505493,267118058647506,269302442029479,271502568751770,273718547239771,275950486359311,278198495418434,280462685064302,282743165944218,285040050052033,287353449836842,
                289683478653218,292030250314523,294393879548199,296774481998449,299172173776635,301587071919553,304019294392111,306468959634803,308936187024981,311421096879523,313923809999382,316444448133857,
                318983133983256,321539990740506,324115142558437,326708714086134,329320831405515,331951621104716,334601210746051,337269728401712,339957303127112,342664064963524,345390144944130,348135674625789,
                350900786562975,353685614313867,356490291969139,359314954628900,362159738408829,365024780446348,367910218421855,370816191043251,373742838052158,376690300226528,379658718901421,382648236457668,
                385658996324466,388691142985650,391744821496478,394820177972683,397917359596789,401036514624464,404177791893482,407341341815277,410527315394102,413735864722196,416967142488456,420221302978300,
                423498501080751,426798892791601,430122635219905,433469886590532,436840805746732,440235553162486,443654289937169,447097178305000,450564381641639,454056064466712,457572391940239,461113530887546,
                464679648781426,468270914257921,471887497123018,475529568355149,479197300111892,482890865736721,486610439242940,490356196355444,494128313480405,497926968225251,501752339405467,505604607051444,
                509483952410941,513390557955941,517324607389553,521286285648463,525275778380715,529293273008799,533338957673826,537413022302874]

    function calculate() {
        const startLevel = parseInt(document.getElementById("startLevel").value);
        const percentage = parseFloat(document.getElementById("percentage").value);
        const endLevel = parseInt(document.getElementById("endLevel").value);
        const expPerGameMillion = parseFloat(document.getElementById("expPerGame").value);

        const resultDiv = document.getElementById("result");

    if (
        isNaN(startLevel) || isNaN(percentage) || isNaN(endLevel) || isNaN(expPerGameMillion) ||
        startLevel < 1 || endLevel < 1 || percentage < 0 || percentage > 100 ||
        startLevel > a.length || endLevel > a.length
    ) {
        resultDiv.style.display = "block";
        resultDiv.innerHTML = "유효하지 않은 입력입니다.";
        return;
    }

    const startExp = a[startLevel - 1];
    const endExp = a[endLevel - 1];
    const percentExp = (percentage / 100) * (endExp - startExp);
    const currentTotalExp = startExp + percentExp;
    let expNeeded = endExp - currentTotalExp;

  // ✅ 상세 옵션 적용
    const isDetailed = document.getElementById("enableDetailedOptions").checked;
    let bonusPercent = 0;
    let buffMultiplier = 1.0;

    if (isDetailed) {
        bonusPercent = parseFloat(document.getElementById("bonusPercent").value) || 0;
        buffMultiplier = parseFloat(document.getElementById("buffMultiplier").value) || 1.0;
    }

  // 1판당 경험치 계산
    const actualExpPerGame = expPerGameMillion * 1000000 * (1 + bonusPercent / 100) * buffMultiplier;
    const playCountRaw = expNeeded / actualExpPerGame;

    let playCount = (playCountRaw % 1 >= 0.5 || playCountRaw <= 0) 
                    ? Math.ceil(playCountRaw) 
                    : Math.floor(playCountRaw);
    playCount = Math.max(playCount, 1);

    const expPerGameEok = (expPerGameMillion / 100).toFixed(1);

    resultDiv.style.display = "block";
    resultDiv.innerHTML = `
        <strong>${startLevel}레벨의 ${percentage}%</strong>에서 
        <strong>${endLevel}레벨</strong>까지 필요한 경험치: 
        <strong>${expNeeded.toLocaleString(undefined, {maximumFractionDigits: 1})}</strong><br />
        1판에 <strong>${expPerGameEok}억</strong> 경험치를 얻는다면 
        <strong>${playCount}</strong>판을 플레이해야 합니다.
    `;
    }

  </script>
</body>
</html>
